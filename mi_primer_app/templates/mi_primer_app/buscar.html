{% extends 'mi_primer_app/base.html' %}
{% block content %}
  <h2>Explorá nuestra colección boutique</h2>
  <form method="get">
    <input type="text" name="cepa" placeholder="Cepa (Malbec, Cabernet...)">
    <input type="text" name="terroir" placeholder="Terroir (Mendoza...)">
    <select name="bodega">
      <option value="">Todas las bodegas</option>
      {% for bodega in bodegas %}
        <option value="{{ bodega.id }}">{{ bodega.nombre }}</option>
      {% endfor %}
    </select>
    <input type="text" name="pais" placeholder="País">
    <input type="number" name="precio_min" placeholder="Precio mínimo">
    <input type="number" name="precio_max" placeholder="Precio máximo">
    <button type="submit">Filtrar</button>
  </form>

  <h3>Resultados</h3>
  <ul>
    {% for vino in vinos %}
      <li style="margin-bottom: 20px;">
        {% if vino.imagen %}
          <img src="{{ vino.imagen.url }}" alt="{{ vino.nombre }}" style="width: 150px; filter: grayscale(100%); border-radius: 8px;">
        {% endif %}
        <strong>{{ vino.nombre }}</strong> — {{ vino.cepa }}  
        <br><em>{{ vino.terroir }} | {{ vino.bodega.nombre }} ({{ vino.bodega.pais }})</em>
        <br><span>${{ vino.precio }}</span>
      </li>
    {% empty %}
      <li>No se encontraron vinos con esos criterios.</li>
    {% endfor %}
  </ul>
{% endblock %}
